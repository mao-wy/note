---
typora-copy-images-to: media
---

# 面向对象案例一-分页

分析：

案例的组成部分：

大盒子、首页、上一页、下一页、尾页 - 使用div

页码是一个div包含了5个p标签

使用者要传参数：

​	数据总条数、每页显示多少条

​	上一页、下一页使用符号使用英文字母来代替文字

这些参数都应该有默认值，调用者不传的时候，使用默认值

页码有规律：

1. 当前页处在所有页面的最中间：规律是 循环5次，初始值是当前页-2，结束页是当前页+2
2. 如果当前页小于等于3，展示1~5
3. 当前页大于等于总页数-2的时候，展示最后5个页面，初始值是总页数-4，结束页是总页数

代码：

1. 先写一个空的构造函数
2. 实例化这个构造函数得到对象
3. 分析参数
4. 在构造函数中
   - 获取元素 - 大盒子
   - 给大盒子添加了样式 - 定义了一个添加样式的方法
5. 创建小盒子 - 首页、上一页、下一页、尾页 
   - 没有根据 - 找根据 - 传进来的参数 language就是根据，在另外一个方法中创建小盒子，获取不到参数，在构造函数中将参数绑定到了大对象上作为属性
   - 问题：如果调用者没有传这个参数，没有根据了，所以在构造函数中定义了一个默认值
   - 问题：如果调用者传入这个参数了，和默认值有冲突 - 将传入的参数替换掉默认值 - setDefault
   - 可以创建小盒子，不能创建放页码的那个div，在默认值中添加了一个list专门用来创建放页码的div
6. 给页码的div中创建页码
   - 根据规律创建页码
   - 发现需要判断总页数和当前页
   - 在构造函数中处理默认值结束后，添加属性总页数和当前页，总页数=向上取整(内容总条数/每页显示的条数)，当前页默认为1
   - 创建页码的过程中需要给页码的p标签设置样式以及设置当前页的样式
   - 将创建好的页码标签放到list的div标签中，发现此时没办法获取到list的div，在构造函数中添加属性list值为null，在创建小盒子的时候判断如果是list的话，给大对象的list属性赋值为创建好的div
7. 给所有小盒子以及页码的p标签添加点击事件
   - 通过事件委托来设置点击事件 
   - 给大盒子添加点击事件，判断事件源是哪个标签，小盒子通过类名来判断，页码标签p通过标签名来判断
   - 点击事件中主要改变当前页的值，并重新创建小盒子，重新创建页码
8. 设置禁用项 - 当当前页为1的时候，首页和上一页不能点击，当当前页为最后一页的时候，下一页和末页不能点击
   - 判断当前页是否为1，是就给大盒子的第一个子元素和第二个子元素添加属性name，值为disabled
   - 给大盒子的第一个子元素和第二个子元素设置背景颜色为灰色
   - 在首页和上一页的点击事件中，多加一个判断条件，获取到事件源的name属性不等于disabled的时候才可以点击
   - 每个点击事件结束后除了要创建小盒子和页码外，还需要添加设置禁用项
   - 同理处理当前页为末页
9. 添加文本框和跳转按钮
   - 创建文本框和button按钮分别追加到大盒子中
   - 在点击事件中添加button按钮的点击事件，并处理获取到的值变为数字，以及输入的数字不合理的处理
   - 在每个点击事件后还需要添加创建文本框和跳转按钮的方法
10. 设置启动器
    - 将所有需要调用的方法封装到一个方法中，通过调用启动器方法简化多次调用
    - 发现点击事件放在单独的事件中没办法处理，所以将点击事件移动到构造函数中
    - 点击事件的方法中所有的_this就可以使用this了，启动器方法就可以调用使用了
11. 使用分页的时候，发现没办法在对象中处理数据的切换，所以在构造函数中添加要执行的函数为传进来的函数，并在启动器方法的最后添加调用这个方法，需要传入当前页为参数







